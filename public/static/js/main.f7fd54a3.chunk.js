(this["webpackJsonpmern-crud"]=this["webpackJsonpmern-crud"]||[]).push([[0],{162:function(e,t,a){},187:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(56),o=a.n(r),c=(a(161),a(162),a(24)),i=a(25),l=a(17),d=a(30),h=a(27),u=a(209),p=a(57),b=a.n(p),j=(a(181),a(187),a(40)),O=a(126),f=a(121),m=a(213),g=a(62),v=a(210),x=a(212),C=a(196),S=a(211),y=a(208),U=a(214),D=a(5),I=[{key:!0,text:"Pagado",value:!0},{key:!1,text:"No pagado",value:!1}],T=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={nombre:"",apellido:"",fecha:"",cedula:"",responsable:"",telefono:"",formClassName:"",formSuccessMessage:"",formErrorMessage:""},n.handleInputChange=n.handleInputChange.bind(Object(l.a)(n)),n.handleSelectChange=n.handleSelectChange.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n}return Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.props.userID&&(console.log(this.props.userID),console.log(this.props.server),b.a.get("".concat(this.props.server,"/api/users/").concat(this.props.userID)).then((function(t){e.setState({nombre:t.data.nombre,apellido:t.data.apellido,fecha:t.data.fecha,cedula:t.data.cedula,responsable:t.data.responsable,telefono:t.data.telefono,estado:t.data.estado})})).catch((function(e){console.log(e)})))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(j.a)({},n,a))}},{key:"handleSelectChange",value:function(e,t){this.setState({estado:t.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={nombre:this.state.nombre,apellido:this.state.apellido,fecha:this.state.fecha,cedula:this.state.cedula,responsable:this.state.responsable,telefono:this.state.telefono,estado:this.state.estado},n=this.props.userID?"put":"post",s=this.props.userID?this.props.userID:"";b()({method:n,responseType:"json",url:"".concat(this.props.server,"/api/users/").concat(s),data:a}).then((function(e){t.setState({formClassName:"success",formSuccessMessage:e.data.msg}),t.props.userID?t.props.onUserUpdated(e.data.result):(t.setState({nombre:"",apellido:"",fecha:"",cedula:"",responsable:"",telefono:"",estado:""}),t.props.onUserAdded(e.data.result))})).catch((function(e){e.response?e.response.data&&t.setState({formClassName:"warning",formErrorMessage:e.response.data.msg}):t.setState({formClassName:"warning",formErrorMessage:"Algo salio mal. "+e})}))}},{key:"render",value:function(){var e=this.state.formClassName,t=this.state.formSuccessMessage,a=this.state.formErrorMessage;return Object(D.jsxs)(S.a,{className:e,onSubmit:this.handleSubmit,children:[Object(D.jsxs)(S.a.Group,{widths:"equal",children:[Object(D.jsx)(S.a.Input,{label:"Nombre",type:"text",placeholder:"Pepito",name:"nombre",maxLength:"40",required:!0,value:this.state.nombre,onChange:this.handleInputChange}),Object(D.jsx)(S.a.Input,{label:"Apellido",type:"text",placeholder:"Perez",name:"apellido",maxLength:"40",required:!0,value:this.state.apellido,onChange:this.handleInputChange})]}),Object(D.jsx)(S.a.Input,{label:"Fecha de Defuncion",name:"fecha",type:"date",maxLength:"10",required:!0,pattern:"\\d{4}-\\d{2}-\\d{2}",value:this.state.fecha.split("T")[0],onChange:this.handleInputChange}),Object(D.jsx)(S.a.Input,{label:"Cedula",type:"text",placeholder:"0104751987",name:"cedula",maxLength:"10",required:!0,value:this.state.cedula,onChange:this.handleInputChange}),Object(D.jsx)(S.a.Input,{label:"Responsable",type:"text",placeholder:"Nombres y Apellidos",min:5,max:130,name:"responsable",value:this.state.responsable,onChange:this.handleInputChange}),Object(D.jsx)(S.a.Input,{label:"Telefono",type:"text",placeholder:"Telefono",min:3,max:20,name:"telefono",value:this.state.telefono,onChange:this.handleInputChange}),Object(D.jsx)(S.a.Field,{control:y.a,label:"Estado",options:I,placeholder:"",value:this.state.estado,onChange:this.handleSelectChange}),Object(D.jsx)(U.a,{success:!0,color:"red",header:"Mensaje:",content:t}),Object(D.jsx)(U.a,{warning:!0,color:"yellow",header:"Advertenciasss!",content:a}),Object(D.jsx)(C.a,{color:this.props.buttonColor,floated:"right",children:this.props.buttonSubmitTitle}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{})," "]})}}]),a}(n.Component),k=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(D.jsxs)(x.a,{trigger:Object(D.jsxs)(C.a,{color:this.props.buttonColor,children:[Object(D.jsx)(g.a,{color:"yellow",name:"edit",size:"large"}),this.props.buttonTriggerTitle]}),dimmer:"inverted",size:"tiny",closeIcon:"open",children:[Object(D.jsx)(x.a.Header,{children:this.props.headerTitle}),Object(D.jsx)(x.a.Content,{children:Object(D.jsx)(T,{buttonSubmitTitle:this.props.buttonSubmitTitle,buttonColor:this.props.buttonColor,userID:this.props.userID,onUserAdded:this.props.onUserAdded,onUserUpdated:this.props.onUserUpdated,server:this.props.server})})]})}}]),a}(n.Component),A=k,_=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleOpen=function(e){return n.setState({modalOpen:!0})},n.handleClose=function(e){return n.setState({modalOpen:!1})},n.state={modalOpen:!1},n.handleOpen=n.handleOpen.bind(Object(l.a)(n)),n.handleClose=n.handleClose.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n}return Object(i.a)(a,[{key:"handleSubmit",value:function(e){var t=this,a=e.target.getAttribute("data-userID");b()({method:"delete",responseType:"json",url:"".concat(this.props.server,"/api/users/").concat(a)}).then((function(e){t.handleClose(),t.props.onUserDeleted(e.data.result)})).catch((function(e){throw t.handleClose(),e}))}},{key:"render",value:function(){return Object(D.jsxs)(x.a,{trigger:Object(D.jsxs)(C.a,{onClick:this.handleOpen,color:this.props.buttonColor,children:[Object(D.jsx)(g.a,{color:"red",name:"delete",size:"large"}),this.props.buttonTriggerTitle]}),open:this.state.modalOpen,onClose:this.handleClose,dimmer:"inverted",size:"tiny",children:[Object(D.jsx)(x.a.Header,{children:this.props.headerTitle}),Object(D.jsx)(x.a.Content,{children:Object(D.jsxs)("p",{children:["Esta seguro de eliminar ",Object(D.jsxs)("strong",{children:[this.props.user.nombre+" "+this.props.user.apellido," "]}),"?"]})}),Object(D.jsxs)(x.a.Actions,{children:[Object(D.jsx)(C.a,{onClick:this.handleSubmit,"data-userID":this.props.user._id,color:"red",children:"Si"}),Object(D.jsx)(C.a,{onClick:this.handleClose,color:"red",children:"No"})]})]})}}]),a}(n.Component),w=a(81),E=a.n(w),N=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={page:0,pageSelection:"",searchQuery:"",header:""},e.componentDidMount=function(){var t=e.props.pageRows,a=void 0===t?10:t;e.setState({pageSelection:[0,a]})},e.componentDidUpdate=function(){var t=e.props,a=t.searchQuery,n=t.pageRows,s=void 0===n?10:n;a&&e.state.searchQuery!==e.props.searchQuery&&e.setState({searchQuery:a,pageSelection:[0,s],page:0})},e.dynamicsort=function(e,t){var a=1;return"desc"===t&&(a=-1),function(t,n){return t[e]<n[e]?-1*a:t[e]>n[e]?1*a:0*a}},e.handleSort=function(t){var a=e.props,n=a.pageRows,s=void 0===n?10:n,r=a.headers,o={};r.forEach((function(a){o=Object(f.a)(Object(f.a)({},o),{},Object(j.a)({},a,a!==t?"":"asc"===e.state[a]?"desc":"asc"))})),e.setState(Object(f.a)({header:t,pageSelection:[0,s],page:0},o))},e.getSort=function(t,a){var n=e.props,s=n.labels[n.headers.indexOf(t)];return a.sort(e.dynamicsort(s,"asc"===e.state[t]?"desc":"asc"))},e.searchOnData=function(e,t){return e?t.filter((function(t){for(var a={},n=0,s=Object.keys(t);n<s.length;n++){var r=s[n];a[r]=t[r]}for(var o=0,c=Object.keys(a);o<c.length;o++){var i=c[o];try{var l=a[i],d=new RegExp("W*("+e+")W*");if(d.test(l.toString().toLowerCase()))return!0;if(d.test(l))return!0}catch(h){return!1}}return!1})):t},e.renderHeaders=function(){var t=e.props.headers;return Object(D.jsx)(m.a.Header,{children:Object(D.jsx)(m.a.Row,{children:(t||[]).map((function(t,a){return Object(D.jsx)(m.a.HeaderCell,{onClick:function(){return e.handleSort(t)},children:Object(D.jsxs)("div",{className:E.a.header,children:[Object(D.jsx)("div",{children:t}),Object(D.jsx)("div",{className:E.a.icon,children:Object(D.jsx)(g.a,{name:"asc"===e.state[t]?"caret up":"caret down"})})]})},a)}))})})},e.handleFooter=function(t){var a=e.props,n=a.pageRows,s=void 0===n?10:n,r=a.data,o=a.searchQuery,c=Math.ceil(e.searchOnData(o,r).length/s);t>=0&&t<c&&e.setState({pageSelection:0===t?[0,s]:[t*s,t*s+s],page:t})},e.getData=function(){var t,a=e.props,n=a.data,s=a.searchQuery,r=e.state,o=r.pageSelection,c=r.header,i=n||[];return s&&(i=e.searchOnData(s,i)),c&&(i=e.getSort(c,i)),o&&(i=(t=i).slice.apply(t,Object(O.a)(o))),i},e.renderData=function(){var t=e.props.labels,a=e.getData();return Object(D.jsx)(m.a.Body,{children:(a||[]).map((function(a,n){return Object(D.jsxs)(m.a.Row,{children:[Object(D.jsx)(m.a.Cell,{textAlign:"center",children:Object(D.jsx)(g.a,{color:a.estado?"green":"red",name:a.estado?"checkmark box":"cancel",size:"large"})}),(t||[]).map((function(e,t){return Object(D.jsx)(m.a.Cell,{children:Object(D.jsx)("div",{className:E.a.cell,children:"fecha"===e?a[e].split("T")[0]:a[e]||""})},a._id)})),Object(D.jsx)(A,{headerTitle:"Editar",buttonTriggerTitle:"",buttonSubmitTitle:"Guardar",buttonColor:"white",userID:a._id,onUserUpdated:e.props.onUserUpdated,server:e.props.server}),Object(D.jsx)(_,{headerTitle:"Eliminar",buttonTriggerTitle:"",buttonColor:"white",user:a,onUserDeleted:e.props.onUserDeleted,server:e.props.server})]},a._id)}))})},e.getLastLimitDown=function(e,t){for(var a=0;e>0;)e-=t,a+=t;return a-t-1},e.renderFooter=function(){for(var t=e.props,a=t.pageRows,n=void 0===a?10:a,s=t.labels,r=t.data,o=t.searchQuery,c=t.footerPages,i=void 0===c?10:c,l=e.state.page,d=[],h=Math.ceil(e.searchOnData(o,r).length/n),u=l<i?1:Math.floor(l/i)*i+1,p=l>e.getLastLimitDown(h,i)?h:u+i-1,b=u;b<=p;b++)d=[].concat(Object(O.a)(d),[b]);return Object(D.jsx)(m.a.Footer,{children:Object(D.jsx)(m.a.Row,{children:Object(D.jsx)(m.a.HeaderCell,{colSpan:s.length+2,children:Object(D.jsxs)(v.a,{floated:"left",pagination:!0,children:[Object(D.jsx)(v.a.Item,{as:"a",icon:!0,onClick:function(){return e.handleFooter(l-1)},children:Object(D.jsx)(g.a,{name:"chevron left"})}),d.map((function(t,a){return Object(D.jsx)(v.a.Item,{style:t-1===l?{backgroundColor:"#E5E5E5"}:{},as:"a",onClick:function(){return e.handleFooter(t-1)},children:t},a)})),Object(D.jsx)(v.a.Item,{as:"a",icon:!0,onClick:function(){return e.handleFooter(l+1)},children:Object(D.jsx)(g.a,{name:"chevron right"})})]})})})})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(D.jsxs)(m.a,{celled:!0,children:[this.renderHeaders(),this.renderData(),this.renderFooter()]})}}]),a}(n.PureComponent),R=N,F=a(216),P=a(207),M=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:""},e.handleInputs=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(j.a)({},n,s))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.search;return Object(D.jsxs)("div",{className:E.a.container,children:[Object(D.jsxs)(F.a,{children:[Object(D.jsx)(F.a.Column,{width:6,children:Object(D.jsx)(A,{headerTitle:"Anadir Usuario",buttonTriggerTitle:"Anadir nuevo",buttonSubmitTitle:"Anadir",buttonColor:"black",onUserAdded:this.props.onUserAdded,server:this.props.server})}),Object(D.jsx)(F.a.Column,{width:6,children:Object(D.jsx)(P.a,{placeholder:"Buscar",onChange:this.handleInputs,value:e,name:"search",icon:"search",style:{width:"250px"}})})]}),Object(D.jsx)(R,{data:this.props.data,headers:["Estado","Nombre","Apellido","Fecha","Cedula","Responsable","Telefono","Acciones"],labels:["nombre","apellido","fecha","cedula","responsable","telefono"],pageRows:10,searchQuery:e,footerPages:10,onUserUpdated:this.props.onUserUpdated,onUserDeleted:this.props.onUserDeleted,server:this.props.server})]})}}]),a}(n.Component),L=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).server=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:3000",e.state={users:[],online:0},e.fetchUsers=e.fetchUsers.bind(Object(l.a)(e)),e.handleUserAdded=e.handleUserAdded.bind(Object(l.a)(e)),e.handleUserUpdated=e.handleUserUpdated.bind(Object(l.a)(e)),e.handleUserDeleted=e.handleUserDeleted.bind(Object(l.a)(e)),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchUsers()}},{key:"fetchUsers",value:function(){var e=this;b.a.get("".concat(this.server,"/api/users/")).then((function(t){e.setState({users:t.data})})).catch((function(e){console.log(e)}))}},{key:"handleUserAdded",value:function(e){var t=this.state.users.slice();t.push(e),this.setState({users:t})}},{key:"handleUserUpdated",value:function(e){var t=this.state.users.slice(),a=t.findIndex((function(t){return t._id===e._id}));t.length>a&&(t[a]=e),this.setState({users:t})}},{key:"handleUserDeleted",value:function(e){var t=this.state.users.slice();t=t.filter((function(t){return t._id!==e._id})),this.setState({users:t})}},{key:"render",value:function(){return Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"App",children:Object(D.jsx)("div",{className:"App-header",children:Object(D.jsx)("h1",{className:"App-intro",children:"Sistema de Gestion del Cementerio de Sayausi"})})}),Object(D.jsx)(u.a,{children:Object(D.jsx)(M,{data:this.state.users,users:this.state.users,onUserAdded:this.handleUserAdded,onUserUpdated:this.handleUserUpdated,onUserDeleted:this.handleUserDeleted,server:this.server})}),Object(D.jsx)("br",{})]})}}]),a}(n.Component),H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,218)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),r(e),o(e)}))};o.a.render(Object(D.jsx)(s.a.StrictMode,{children:Object(D.jsx)(L,{})}),document.getElementById("root")),H()},81:function(e,t,a){e.exports={header:"style_header__38JPN",icon:"style_icon__3FnPc",cell:"style_cell__2ayRz",container:"style_container__2BOQK"}}},[[195,1,2]]]);
//# sourceMappingURL=main.f7fd54a3.chunk.js.map